{% extends "base.html" %}

{% block page_title %}{{ title }}{% endblock %}

{% block page_actions %}
  <a class="button button-ghost" href="{{ url_for('main.jobs') }}">Volver</a>
{% endblock %}

{% block content %}
  <section class="panel">
    <div class="panel-header">
      <h2>{{ title }}</h2>
      <span class="pill">Trabajos</span>
    </div>
    <div class="panel-body">
      <form method="post" class="form-stack">
        {{ form.hidden_tag() }}
        <div class="form-grid">
          <label>
            Bicicleta
            {{ form.bicycle_id(class_="input") }}
          </label>
          <label>
            Estado
            {{ form.status(class_="input") }}
          </label>
          <label>
            Services
            <div class="service-options">
              {% if services %}
                {% for service in services %}
                  <label class="service-option">
                    <input type="checkbox" name="service_type_ids" value="{{ service.id }}"
                      {% if service.id in selected_ids %}checked{% endif %}>
                    <span>
                      <span class="service-name">{{ service.name }}</span>
                      <span class="service-price">$ {{ service.base_price|currency }}</span>
                      {% if service.description %}
                        <span class="service-desc">{{ service.description }}</span>
                      {% endif %}
                    </span>
                  </label>
                {% endfor %}
              {% else %}
                <span class="muted">No hay services creados.</span>
              {% endif %}
            </div>
          </label>
          <label>
            Notas
            {{ form.notes(class_="input") }}
          </label>
        </div>
        <div class="panel-note">Puedes seleccionar multiples services. Cada item se agrega con cantidad 1.</div>
        <div class="form-actions">
          <button class="button" type="submit">{{ submit_label }}</button>
          <a class="button button-ghost" href="{{ url_for('main.jobs') }}">Cancelar</a>
        </div>
      </form>
    </div>
  </section>
{% endblock %}
