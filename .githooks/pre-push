#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(git rev-parse --show-toplevel)"
cd "$ROOT_DIR"

echo "[pre-push] Ejecutando validaciones locales..."
python3 -m compileall app >/dev/null

if command -v make >/dev/null 2>&1; then
  make test-local
else
  pytest
fi

echo "[pre-push] Validaciones completadas. Push habilitado."
